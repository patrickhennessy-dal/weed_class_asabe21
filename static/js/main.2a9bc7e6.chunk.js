(this.webpackJsonpweed_class_asabe21=this.webpackJsonpweed_class_asabe21||[]).push([[0],{257:function(e,t,n){},265:function(e,t){},266:function(e,t){},274:function(e,t){},277:function(e,t){},278:function(e,t){},279:function(e,t,n){"use strict";n.r(t);var a=n(59),s=n.n(a),c=n(233),r=n.n(c),i=(n(257),n.p+"static/media/Logo_CPU.34e63f65.svg"),o=n(36),l=function(e){e.title;return Object(o.jsx)("header",{className:"header",children:Object(o.jsxs)("h1",{children:[Object(o.jsx)("img",{className:"logoCPU",src:i,alt:"Logo"}),"CNN Weed Classifier"]})})},d=function(){return Object(o.jsxs)("div",{className:"intro text",children:[Object(o.jsxs)("p",{children:["This is an application for classifying weeds in wild blueberry fields. The currently supported weeds are hair fescue, sheep sorrel, hawkweed, goldenrod, and bunchberry. This applicaton was presented at ASABE AIM 2021 with a ",Object(o.jsx)("a",{href:"https://www.asabemeetings.org/",children:"corresponding paper"})," in the conference proceedings."]}),Object(o.jsx)("p",{children:"To use the application, capture an image of the weed from directly above from a height of around 1 metre. Alternatively, download sample images below. Then, upload the image and let the deep learning algorithm do the work!"})]})},u=n(4),h=n.n(u),j=n(11),b=n(6),p=(n(260),n(138)),f=function(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(null),r=Object(b.a)(c,2),i=r[0],l=r[1],d=Object(a.useState)(null),u=Object(b.a)(d,2),f=u[0],g=u[1],m=Object(a.useState)([]),O=Object(b.a)(m,2),x=O[0],w=O[1],v=Object(a.useState)([]),y=Object(b.a)(v,2),N=y[0],S=y[1],k=["Goldenrod","Hawkweed","Bunchberry","Sheep Sorrel","No Weeds","Hair Fescue"],C=Object(a.useRef)(),A=Object(a.useRef)(),P=function(){var e=Object(j.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,p.e("https://cdn.jsdelivr.net/gh/patrickhennessy-dal/weed_class_asabe21/src/assets/modelMN/model.json");case 4:t=e.sent,l(t),s(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),s(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(j.a)(h.a.mark((function e(){var t,n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.b.fromPixelsAsync(C.current);case 2:return t=e.sent,t=p.c(t,0),t=p.d.resizeBilinear(t,[224,224]),e.next=7,i.predict(t);case 7:n=e.sent,console.log("prob "+n),a=p.a(n,1),console.log(n.dataSync()[a.dataSync()[0]]),console.log("result "+a),console.log(a.dataSync()[0]),console.log(k[a.dataSync()[0]]),w(k[a.dataSync()[0]]),S(n.dataSync()[a.dataSync()[0]]);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){P()}),[]),n?Object(o.jsx)("h2",{children:"Model Loading..."}):Object(o.jsxs)("div",{className:"classifier",children:[Object(o.jsxs)("div",{className:"mainWrapper",children:[Object(o.jsxs)("div",{className:"mainContent",children:[Object(o.jsx)("div",{className:"imageHolder",children:f&&Object(o.jsx)("img",{src:f,className:"image",alt:"Upload Preview",crossOrigin:"anonymous",ref:C})}),x.length>0&&Object(o.jsx)("div",{className:"resultsHolder",children:Object(o.jsxs)("div",{className:"result",children:[Object(o.jsx)("span",{className:"name",children:Object(o.jsxs)("p",{children:["Result: ",x," "]})}),Object(o.jsxs)("span",{className:"confidence",children:["Confidence level: ",(100*N).toFixed(2)," %"]})]},x.className)})]}),f&&Object(o.jsx)("button",{className:"ctrlBtn",onClick:B,children:"Identify Image"})]}),Object(o.jsxs)("div",{className:"inputHolder",children:[Object(o.jsx)("input",{type:"file",accept:"image/*",capture:"camera",className:"uploadInput",onChange:function(e){var t=e.target.files;if(t.length>0){var n=URL.createObjectURL(t[0]);g(n)}else g(null)},ref:A}),Object(o.jsx)("button",{className:"ctrlBtn",onClick:function(){A.current.click()},children:"Upload Image"})]})]})},g=function(){return Object(o.jsxs)("div",{className:"text",children:[Object(o.jsx)("h2",{children:"Acknowledgements"}),Object(o.jsx)("p",{children:"This work was supported by Mitacs through the Mitacs Accelerate Program. Additional funding for this research was provided by Natural Sciences and Engineering Research Council of Canada Discovery Grants Program (RGPIN-06295-2019), Doug Bragg Enterprises, Ltd, and New Brunswick Canadian Agricultural Partnership (CAP). The authors would like to thank the wild blueberry growers in Nova Scotia for use of their fields during image collection. Also, the authors acknowledge the efforts of the mechanized systems and precision agriculture research teams at Dalhousie University\u2019s Faculty of Agriculture."})]})};var m=function(){return Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)(l,{}),Object(o.jsx)(d,{}),Object(o.jsx)(f,{}),Object(o.jsx)(g,{})]})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,280)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};r.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(m,{})}),document.getElementById("root")),O()}},[[279,1,2]]]);
//# sourceMappingURL=main.2a9bc7e6.chunk.js.map